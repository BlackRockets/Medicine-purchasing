<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../static/layui/css/layui.css" media="all">
    <script src="../static/layui/jquery-3.4.1.min.js"></script>
    <!-- <script src="../static/layui/jquery-form.js"></script>-->
    <script src="../static/layui/layui.js" charset="utf-8"></script>
    <!--监督管理   查询药品交易明细-->
</head>
<body>
<div class="layui-container">
    <div class="layui-row">
        <form class="layui-form" action="">
            <table class="layui-table" lay-size="sm" id="TestAll">
                <thead>
                <tr class="layui-row">
                    <td><h2 align="center" style="font-weight: bold;">查询药品交易明细</h2></td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">采购单编号：</label>
                            <div class="layui-input-inline">
                                <input type="tel" name="purchaseOrderNumber" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">采购单名称：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="nameOfPurchaseOrder" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">采购医院：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="nameOfHospital" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">采购状态：</label>
                            <div class="layui-input-inline">
                                <select name="purchaseOrderStatus" lay-verify="" lay-search="">
                                    <option value="">全部</option>
                                    <option value="1">未确认送货</option>
                                    <option value="2">已发货</option>
                                    <option value="4">已入库</option>
                                    <option value="5">无法供货</option>
                                    <option value="6">到期未送货</option>
                                </select>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">供货商：</label>
                            <div class="layui-input-inline">
                                <input type="tel" name="nameOfEnterprise" lay-verify=""
                                       autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">统计时间：</label>
                            <div class="layui-input">
                                <input style="width: 20%;margin-top:3%" type="text" name="email" lay-verify="email"
                                       autocomplete="off" class="layui-input-inline" id="time01"
                                       placeholder="yyyy-MM-dd HH:mm:ss">
                                <span>至</span>
                                <input style="width: 20%;margin-top:3%" type="text" name="email" lay-verify="email"
                                       autocomplete="off" class="layui-input-inline" id="time02"
                                       placeholder="yyyy-MM-dd HH:mm:ss">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">药品流水号：</label>
                            <div class="layui-input-inline">
                                <input type="tel" name="serialUmber" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">通用名：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="dosageForm" lay-verify="" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">剂型：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="dosageFormDrug" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">规格：</label>
                            <div class="layui-input-inline">
                                <input type="tel" name="specifications" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">单位：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="company" lay-verify="" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">转换系数：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="conversionCoefficientNo" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">生产企业：</label>
                            <div class="layui-input-inline">
                                <input type="tel" name="nameOfManufacturer" lay-verify="required|phone"
                                       autocomplete="off" class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">商品名：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="tradeName" lay-verify="" autocomplete="off"
                                       class="layui-input">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="layui-inline">
                            <label class="layui-form-label">质量层次：</label>
                            <div class="layui-input-inline">
                                <select name="qualityLevel" lay-verify="" lay-search="">
                                    <option value="">全部</option>
                                    <option value="1">国家一类新药</option>
                                    <option value="2">国家科学进步奖</option>
                                    <option value="3">专利</option>
                                    <option value="3">原研</option>
                                    <option value="3">单独定价</option>
                                    <option value="3">优质优价</option>
                                    <option value="3">GMP</option>
                                </select>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td align="center">
                        <button type="button" class="layui-btn layui-btn-sm" id="find">查询</button>
                    </td>
                    <td>

                    </td>
                    <td align="center">
                        <button type="button" class="layui-btn layui-btn-sm" >导出</button>
                    </td>
                </tbody>
            </table>
        </form>
    </div>
</div>
<script src="../static/layui/layui.js" charset="utf-8"></script>
</body>
<script>

    layui.use(['table', 'form'], function () {
        var table = layui.table;
        var mainTable = table.render({
            elem: '#TestAll'
            , url: '/HospitalTransationDetials/findAllHospitalTransationDetials'
            , toolbar: 'default'
            , cols: [[
                {type: 'checkbox', fixed: 'left'}
                , {field: 'nameOfHospital',templet: '<div>{{d.himf.nameOfHospital}}</div>', title: '采购医院',}
                , {field: 'nameOfPurchaseOrder',templet: '<div>{{d.po.nameOfPurchaseOrder}}</div>', title: '采购单编号',}
                , {field: 'purchaseOrderStatus',templet: '<div>{{d.po.purchaseOrderStatus}}</div>', title: '采购单名称',}
                /*, {field: 'id', title: '开始采购时间',}
                , {field: 'id', title: '结束采购时间',}*/
                , {field: 'serialUmber',templet: '<div>{{d.drug.serialUmber}}</div>', title: '流水号',}
                , {field: 'dosageForm',templet: '<div>{{d.drug.dosageForm}}</div>', title: '通用名'}
                , {field: 'tradeName',templet: '<div>{{d.drug.tradeName}}</div>', title: '商品名'}
                , {field: 'dosageFormDrug',templet: '<div>{{d.drug.dosageFormDrug}}</div>', title: '剂型',}
                , {field: 'specifications',templet: '<div>{{d.drug.specifications}}</div>', title: '规格'}
                , {field: 'company',templet: '<div>{{d.drug.company}}</div>', title: '单位',}
                , {field: 'conversionCoefficientNo',templet: '<div>{{d.drug.conversionCoefficientNo}}</div>', title: '转换系数',}
                , {field: 'qualityLevel',templet: '<div>{{d.drug.qualityLevel}}</div>', title: '质量层次',}
                , {field: 'nameOfManufacturer',templet: '<div>{{d.drug.nameOfManufacturer}}</div>', title: '生产企业',}
                , {field: 'bidPrice', title: '中标价',}
                , {field: 'transactionPrice', title: '交易价',}
                , {field: 'purchaseVolume', title: '采购量',}
                , {field: 'purchaseAmount', title: '采购金额',}
                , {field: 'experience', title: '采购状态',}
                , {field: 'storageVolume', title: '入库量',}
                , {field: 'warehousingAmount', title: '入库金额'}
            ]]
            , page: true
        });
        $("#find").on("click", function () {
            var purchaseOrderNumber = $("[name=purchaseOrderNumber]").val();
            var nameOfPurchaseOrder = $("[name=nameOfPurchaseOrder]").val();
            var nameOfHospital = $("[name=nameOfHospital]").val();
            var purchaseOrderStatus = $("[name=purchaseOrderStatus]").val();
            var nameOfEnterprise = $("[name=nameOfEnterprise]").val();
            var serialUmber = $("[name=serialUmber]").val();
            var dosageForm = $("[name=dosageForm]").val();
            var dosageFormDrug = $("[name=dosageFormDrug]").val();
            var specifications = $("[name=specifications]").val();
            var company = $("[name=company]").val();
            var conversionCoefficientNo = $("[name=conversionCoefficientNo]").val();
            var nameOfManufacturer = $("[name=nameOfManufacturer]").val();
            var tradeName = $("[name=tradeName]").val();
            var qualityLevel = $("[name=qualityLevel]").val();
            var drugCategory = $("[name=drugCategory]").val();
            mainTable.reload({
                where: {
                    purchaseOrderNumber: purchaseOrderNumber,
                    nameOfPurchaseOrder: nameOfPurchaseOrder,
                    nameOfHospital: nameOfHospital,
                    purchaseOrderStatus: purchaseOrderStatus,
                    nameOfEnterprise: nameOfEnterprise,
                    serialUmber: serialUmber,
                    dosageForm: dosageForm,
                    dosageFormDrug: dosageFormDrug,
                    specifications: specifications,
                    company: company,
                    conversionCoefficientNo: conversionCoefficientNo,
                    nameOfManufacturer: nameOfManufacturer,
                    tradeName: tradeName,
                    qualityLevel: qualityLevel,
                    drugCategory: drugCategory
                }
                , page: {
                    curr: 1
                }
            });
        })

    });

</script>

</html>