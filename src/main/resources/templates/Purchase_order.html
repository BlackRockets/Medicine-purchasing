<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>采购单管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../layui/css/layui.css" media="all">
    <script src="../layui/layui.js" charset="utf-8"></script>
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>采购单查询</legend>
</fieldset>
<form class="layui-form layui-form-pane" action="">
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">采购单编号</label>
            <div class="layui-input-block">
                <input type="text" name="purchaseOrderNumber" id="purchaseOrderNumber" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">采购单名称</label>
            <div class="layui-input-inline">
                <input type="text" name="nameOfPurchaseOrder" id="nameOfPurchaseOrder" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">采购单状态</label>
            <div class="layui-input-block">
                <input type="text" name="purchaseOrderStatus" id="purchaseOrderStatus" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">采购时间</label>
            <div class="layui-input-inline" style="width: 100px;">
                <input type="text" name="orderCreationTime" id="orderCreationTime" placeholder="" autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid">-</div>
            <div class="layui-input-inline" style="width: 100px;">
                <input type="text" name="price_max" placeholder="" autocomplete="off" class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">医院名称</label>
            <div class="layui-input-block">
                <input type="text" name="nameOfHospital" id="nameOfHospital" autocomplete="off" class="layui-input">
            </div>
        </div>
    </div>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend></legend>
    </fieldset>
    <div class="layui-form-item" style="text-align: center">
        <button class="layui-btn" lay-submit="" lay-filter="">查询</button>
    </div>
</form>
<a class="layui-btn layui-btn-sm" id="add-order-btn">添加采购单</a>
<table class="layui-table" lay-data="{width: 100%, height:330, url:'/demo/table/user/', page:true, id:'idTest'}" lay-filter="demo">

    <thead>
    <tr>
        <th lay-data="{type:'checkbox', fixed: 'left'}"></th>
      <!--  <th lay-data="{field:'id', width:120, fixed: true}">ID</th>-->
        <th lay-data="{field:'username',align:'center', width:120}">医院名称</th>
        <th lay-data="{field:'sex',align:'center', width:120,}">采购单编号</th>
        <th lay-data="{field:'city',align:'center', width:200}">采购单名称</th>
        <th lay-data="{field:'sign', width:120}">开始时间</th>
        <th lay-data="{field:'experience', width:120}">结束时间</th>
        <th lay-data="{field:'classify', width:120}">建单时间</th>
        <th lay-data="{field:'wealth', width:120}">提交时间</th>
        <th lay-data="{field:'score', width:120, fixed: 'right'}">审核时间</th>
        <th lay-data="{field:'score', width:120,fixed: 'right'}">采购单状态</th>
        <th lay-data="{fixed: 'right', width:200, align:'center', toolbar: '#barDemo'}">操作</th>
    </tr>
    </thead>
</table>
<!--弹出添加界面-->
<div id="add-order-layer" style="display: none;padding: 20px">
    <form id="add-order-form" class="layui-form ">
        <div class="layui-row">
        <div class="layui-form-item ">
            <div class="layui-col-xs6">
            <div class="layui-inline ">
                <label class="layui-form-label">医院编号</label>
                <div class="layui-input-block">
                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                </div>
            </div>
            </div>
            <div class="layui-col-xs6">
            <div class="layui-inline ">
                <label class="layui-form-label">医院名称</label>
                <div class="layui-input-inline">
                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                </div>
            </div>
            </div>
        </div>
        </div>
        <div class="layui-row">
            <div class="layui-form-item ">
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">采购单编号</label>
                        <div class="layui-input-block">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">采购单名称</label>
                        <div class="layui-input-inline">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row">
        <div class="layui-form-item">
            <div class="layui-col-xs6">
            <div class="layui-inline">
                <label class="layui-form-label">供货时间</label>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="text" name="price_min" placeholder="" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid">-</div>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="text" name="price_max" placeholder="" autocomplete="off" class="layui-input">
                </div>
            </div>
            </div>
            <div class="layui-col-xs6">
            <div class="layui-inline">
                <label class="layui-form-label">建单时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                </div>
            </div>
            </div>
        </div>
        </div>
        <div class="layui-row">
            <div class="layui-form-item ">
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">联系人</label>
                        <div class="layui-input-block">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">联系人电话</label>
                        <div class="layui-input-inline">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-form-item ">
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">采购单状态</label>
                        <div class="layui-input-block">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">提交时间</label>
                        <div class="layui-input-inline">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">备注</label>
            <div class="layui-input-block">
                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-form-item ">
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">审核人</label>
                        <div class="layui-input-block">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6">
                    <div class="layui-inline ">
                        <label class="layui-form-label">审核时间</label>
                        <div class="layui-input-inline">
                            <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">单行输入框</label>
            <div class="layui-input-block">
                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="add-user-form-submit">提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>
<!--弹出修改界面-->
<div id="edit-order-layer" style="display: none;padding: 20px">
            <form id="edit-order-form" class="layui-form ">
                <div class="layui-row">
                    <div class="layui-form-item ">
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">医院编号</label>
                                <div class="layui-input-block">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">医院名称</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-form-item ">
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">采购单编号</label>
                                <div class="layui-input-block">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">采购单名称</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-form-item">
                        <div class="layui-col-xs6">
                            <div class="layui-inline">
                                <label class="layui-form-label">供货时间</label>
                                <div class="layui-input-inline" style="width: 100px;">
                                    <input type="text" name="price_min" placeholder="" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid">-</div>
                                <div class="layui-input-inline" style="width: 100px;">
                                    <input type="text" name="price_max" placeholder="" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6">
                            <div class="layui-inline">
                                <label class="layui-form-label">建单时间</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-form-item ">
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">联系人</label>
                                <div class="layui-input-block">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">联系人电话</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-form-item ">
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">采购单状态</label>
                                <div class="layui-input-block">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">提交时间</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">备注</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-form-item ">
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">审核人</label>
                                <div class="layui-input-block">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6">
                            <div class="layui-inline ">
                                <label class="layui-form-label">审核时间</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" class="layui-input" lay-verify="required" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">单行输入框</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit lay-filter="add-user-form-submit">提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </form>
        </div>

<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script src="../layui/layui.js" charset="utf-8"></script>
<script>
    layui.use(['jquery', 'table', 'layer', 'form'], function() {
        // 加载layui模块，使用其推荐的【预先加载】方式，详见官网【模块规范】一节
        var $ = layui.$;
        var table = layui.table;
        var layer = layui.layer;
        var form = layui.form;

        // 显示所有用户
        table.render({
            elem: '#user-tbl',
            url: 'user/all',
            method: 'get',
            cols: [[
                {field: 'account', title: '账户'},
                {field: 'password', title: '密码'},
                {field: 'name', title: '姓名'},
                {field: 'info', title: '信息'},
                {toolbar: '#user-tbl-toolbar', title: '操作'}
            ]],
            // 表格容器id，用于表格重载
            id: 'user-tbl',
        });
        // 显示添加用户弹出层
        $('#add-order-btn').click(function () {
            // 每次显示前重置表单
            $('#add-order-form')[0].reset();
            layer.open({
                type: 1,
                title: '添加采购单',
                skin: 'layui-order-molv',
                area: ['900px'],
                content: $('#add-order-layer')
            });
        });
        $('#edit-order-layer').click(function () {
            //
            $('#edit-order-layer')[0].reset();
            layer.open({
                type: 1,
                title: '修改采购单',
                skin: 'layui-order-molv',
                area: ['900px'],
                content: $('#edit-order-layer')
            });
        });
        form.on('submit(add-order-form-submit)', function(data) {
            // ajax方式添加用户
            $.ajax({
                url: "user",
                type: "POST",
                data: JSON.stringify(data.field),
                contentType: 'application/json',
                dataType: 'json',
                success: function(data) {
                    if (data.status == 1) {
                        layer.close(layer.index);
                        layer.msg('添加成功');
                        table.reload('user-tbl');
                    } else {
                        layer.msg('添加失败');
                    }
                },
                error: function() {
                    console.log("ajax error");
                }
            });
            // 阻止表单跳转
            return false;
        });
    })
</script>
</body>
</html>
